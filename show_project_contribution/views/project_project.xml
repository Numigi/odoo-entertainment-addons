<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="project_form" model="ir.ui.view">
        <field name="name">Project Form: add contribution bases</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="show_project.project_form"/>
        <field name="arch" type="xml">
            <page name="show_venue" position="after">
                <page
                    string="Contributions"
                    name="show_contributions"
                    attrs="{'invisible': [('show_type', '!=', 'show')]}"
                    >
                    <label for="contribution_base_ids" string="Applicable Contributions"/>
                    <field name="contribution_base_ids" nolabel="1" colspan="2">
                        <tree>
                            <field name="amount" string="Contribution Base"/>
                            <field name="type_id"/>
                            <field name="description"/>
                        </tree>
                    </field>

                    <button
                        name="compute_show_contributions"
                        type="object"
                        class="oe_highlight"
                        string="Compute Contribution Bases"
                        style="margin: 8px 0px"
                        />

                    <field name="show_contribution_ids" nolabel="1" colspan="2" readonly="1">
                        <tree>
                            <field name="partner_id"/>
                            <field name="employee_id" string="Related Employee"/>
                            <field name="register_id"/>
                            <field name="code"/>
                            <field name="base_amount"/>
                        </tree>
                    </field>
                </page>
            </page>
        </field>
    </record>

</odoo>
